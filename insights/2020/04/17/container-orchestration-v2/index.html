<!doctype html><html lang=en-us><head><link rel=preconnect href=https://fonts.googleapis.com><link rel=dns-prefetch href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com><link rel=dns-prefetch href=https://fonts.gstatic.com><link rel=preconnect href=https://cdnjs.cloudflare.com><link rel=dns-prefetch href=https://cdnjs.cloudflare.com><link rel=preconnect href=https://www.googletagmanager.com><link rel=dns-prefetch href=https://www.googletagmanager.com><link rel=dns-prefetch href=https://cdn.jsdelivr.net><link rel=preconnect href=https://cdn.jsdelivr.net><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>LMP Container Orchestration Roadmap - Episode 2 | Foundries.io</title><link rel="shortcut icon" href=/images/icons/favicon.ico><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lato:300,400,500,700,900"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css integrity="sha256-HtCCUh9Hkh//8U1OwcbD8epVEUdBvuI8wj1KtqMhNkI=" crossorigin=anonymous><link rel=stylesheet href=/css/foundation.min.228f9b8bdf4aae06e794eb13011f0858c2d27f9d39a55e09bbe84ff4bc8644c4.css><link rel=stylesheet href=/style.insights.bundle.min.c2a3bb492bbfdcc930d84bc31bb0c72b3a59debe873bf8731d72cfd54abab1d1.css><link rel=stylesheet href=/css/slicknav.min.css><link rel=stylesheet type=text/css href=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css></head><body><div class="top sticky"><div class=row><div class="small-12 large-3 medium-3 columns"><div class=logo><a href=/><img src=/images/logo.png alt="Foundries.io logo"></a></div></div><div class="small-12 large-9 medium-9 columns"><nav class=desktop-menu><ul class=sf-menu id=navigation><li><a href=/company/>ABOUT</a><ul class=nav-menu><li><a href=/company/>COMPANY</a></li><li><a href=/careers/>CAREERS</a></li></ul></li><li><a href=/insights/>INSIGHTS</a><ul class=nav-menu><li><a href=/insights/>BLOG</a></li><li><a href=/categories/news-and-media/>NEWS</a></li><li><a href=/categories/updates/>UPDATES</a></li><li><a href=/faq/>FAQ</a></li></ul></li><li><a href=/partners/>PARTNERS</a><ul class=nav-menu><li><a href=/partners/>PARTNER PROGRAM</a></li><li><a href=/partners/all/>OUR PARTNERS</a></li></ul></li><li><a href=/products/>PRODUCTS</a><ul class=nav-menu><li><a href=/products/>FACTORY</a></li><li><a href=/pricing/>PRICING</a></li><li><a href=/hardware/>HARDWARE</a></li><li><a href=/terms/>TERMS &amp; CONDITIONS</a></li></ul></li><li><a href="https://app.foundries.io/login/?next=/"><i class="fa fa-cloud-upload"></i>&nbsp;ENGAGE</a><ul class=nav-menu><li><a href=https://app.foundries.io/docs/>DOCUMENTATION</a></li><li><a href="https://app.foundries.io/login/?next=/">DASHBOARD</a></li><li><a href=https://support.foundries.io>SUPPORT</a></li><li><a href=https://join.slack.com/t/foundriesio/shared_invite/enQtNTc5NDkxNTI5NTExLWQ1Yjc3NDA2MjI3NzA3YzkxYjEzNzlhZjQ0M2QxYTIzYmIzZjlmOThmZGU0NTk5MWEwZGIwMTU2YWE4N2I5NWQ>SLACK</a></li><li><a href=https://app.foundries.io>START YOUR FACTORY</a></li></ul></li><li><a href=/calldemo/><i class="fa fa-calendar-check-o"></i>&nbsp;Request a Demo</a></li></ul></nav></div></div></div><header class=alt-6><div class=message><div class=row><div class="small-12 columns"><div class=message-intro><span class=message-line></span><p>FOUNDRIES.IO INSIGHTS</p><span class=message-line></span></div><h1>LMP Container Orchestration Roadmap - Episode 2</h1><p class="text-muted text-uppercase mb-small text-right color-white">By Andy Doan&nbsp;|
April 17, 2020</p></div></div></div></header><div id=content><div class=container><div class=row><div class="small-12 columns" id=insights-post><div id=post-content><p>Back in December, we laid out a roadmap for
<a href=https://foundries.io/insights/2019/12/04/20191205-container-orchestration-roadmap/>container orchestration</a>.
Then the dust settled from the <a href=https://techcrunch.com/2019/11/13/mirantis-acquires-docker-enterprise/>Docker spinoff</a>.
What we now know is that Docker Apps is an inactive project. tldr; It&rsquo;s not
a big deal for our customers and they are going to automagically get
something better very soon:</p><h2 id=some-context>Some Context</h2><p>Docker Apps were important to us for one main reason: It was an upstream
open standard. However, as development of Docker Apps progressed, things
weren&rsquo;t so great anyway:</p><ul><li>It was, surprisingly, not well integrated with docker-compose</li><li>It was <a href=https://github.com/foundriesio/ci-scripts/commit/05d5bcbaf13fb274a7a8f76c74e05a0ca4cc5d46#diff-abe6155434ada9be416f6eba7f063910>incredibly difficult</a>
to integrate with multi-arch containers.</li><li>It didn&rsquo;t really solve the most common thing most people want when
distributing docker-compose type things: Inability to bind mount local
files into the container (eg custom nginx.conf).</li></ul><p>In some ways we were making the best of a bad situation and hoping we could
eventually grind things out upstream (i.e. spend months begging for
improvements via code reviews and crying ourselves to sleep).</p><h2 id=what-now>What Now?</h2><p>The good news is that we were so early on docker app, that we aren&rsquo;t even
using it well. We can keep going how we are and nobody is affected. The
other good news: Docker <a href=https://github.com/compose-spec/>is committed</a>
to docker-compose.</p><p>The bad news is that nobody seems to care about single node container
orchestration. If the answer isn&rsquo;t Kubernetes, then nobody is listening &hellip;
except for Foundries.io. We care and have opinions. docker-compose is great.
Having an immutable way to distribute compose applications is both
important and easy to do. Our approach is what we call &ldquo;Compose Bundles&rdquo;.</p><h2 id=compose-bundles>Compose Bundles</h2><p>Quick background: A docker registry (eg hub.foundries.io or hub.docker.io)
is a simple content addressable system. You just upload &ldquo;<a href=https://docs.docker.com/registry/spec/api/#blob>Blobs</a>&ldquo;
which can be anything and are referenced by their SHA-256 hash.</p><p>A Compose Bundle is simply a compressed tarball including:</p><ul><li><p>docker-compose.yml - At &ldquo;publish&rdquo; time we take the docker-compose.yml
file and pin each service container image to its immutable SHA-256
hash at the time. This makes it reproducible and TUF friendly.</p></li><li><p>Optional support files - Like an &ldquo;nginx.conf&rdquo; file that docker compose
might bind mount inside one of its services.</p></li></ul><p>We plan to refine a version of <a href=https://github.com/doanac/compose-ref/tree/publish-bundle>compose-ref</a>
to automatically do this for our factory users. We also have a simple change
we plan to carry in the LMP for docker-compose to
<a href=https://github.com/doanac/compose/commit/71c826fff0039a40fe310fe9bcdf71c4495df58d>consume these bundles</a>.</p><h2 id=migration-to-bundles>Migration to Bundles</h2><p>Our build scripts will know how to convert existing <code>.dockerap</code> content into
this new world. This means you won&rsquo;t have to do anything. For a period of
time, your LmP build Targets will include a reference to the Docker App
and this new Compose Bundle. This will allow Aktualizr-lite to
update/rollback between these two styles.</p><p>Aktualizr-lite will need to include package manager support for this new
bundle. It will probably carry the unfortunate name of &ldquo;docker-apps&rdquo; so
that we don&rsquo;t affect existing devices. We&rsquo;ve already
<a href=https://github.com/advancedtelematic/aktualizr/pull/1557>done this once</a>
when preparing for the 1.0 version of Docker App that never was.</p><p>Once a fleet is converted (or if you don&rsquo;t have anything to convert), users
can ditch the <code>.dockerapp</code> files (once their fleet is ready) and start
working directly with docker-compose files like we are all used to.</p><h2 id=faq>FAQ</h2><p><strong>Q:</strong> <em>I don’t like this.</em></p><p><strong>A:</strong> That’s not a question. We&rsquo;ve been surprised how little people have
cared about the plumbing of Docker Apps. They just produce the
<code>.dockerapp</code> file once and move on. The &ldquo;download&rdquo; step during an update is
important &hellip; if things are inefficient. However, this will be
<strong>more efficient</strong> than what we were doing with Docker App Bundles.</p><p><strong>Q:</strong> <em>This doesn&rsquo;t look &ldquo;upstreamable&rdquo;.</em></p><p><strong>A:</strong> That&rsquo;s not a question. It might not be. However, we&rsquo;ve intentionally
made these changes to be as small as possible so that they might. The
world <strong>does</strong> need something like this. If it doesn&rsquo;t go upstream? That&rsquo;s
fine - it&rsquo;s not much code.</p><p><strong>Q:</strong> <em>What about k3s??</em></p><p><strong>A:</strong> We aren&rsquo;t encountering embedded product makers that need this.
Plus, it has its own baggage. It&rsquo;s orthogonal to this &ldquo;publishing&rdquo; problem
we are trying to address here.</p><p><strong>Q:</strong> <em>Why do you hate Kubernetes?</em></p><p><strong>A:</strong> We don&rsquo;t. We gambled our entire company&rsquo;s backend infrastructure
on GKE 2.5 years ago. I love it for that. Not for this.</p></div><div id=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"foundriesio"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><div class=row><div class="small-12 columns"><div class=post-categories><div class="panel panel-default sidebar-menu"><div class=panel-heading><h3 class=panel-title>Categories</h3></div><div class=panel-body><ul class="nav nav-pills nav-stacked"><li><a href=https://foundries.io/categories/blockchain>blockchain (1)</a></li><li><a href=https://foundries.io/categories/conferences>conferences (4)</a></li><li><a href=https://foundries.io/categories/demos>demos (4)</a></li><li><a href=https://foundries.io/categories/fota>fota (15)</a></li><li><a href=https://foundries.io/categories/foundriesfactory>foundriesfactory (1)</a></li><li><a href=https://foundries.io/categories/iot>iot (1)</a></li><li><a href=https://foundries.io/categories/lmp>lmp (6)</a></li><li><a href=https://foundries.io/categories/microplatform>microplatform (8)</a></li><li><a href=https://foundries.io/categories/news-and-media>news-and-media (11)</a></li><li><a href=https://foundries.io/categories/security>security (1)</a></li><li><a href=https://foundries.io/categories/toradex>toradex (1)</a></li><li><a href=https://foundries.io/categories/updates>updates (71)</a></li><li><a href=https://foundries.io/categories/zephyr-mp>zephyr-mp (2)</a></li><li><a href=https://foundries.io/categories/zephyr-news>zephyr-news (16)</a></li></ul></div></div><div class="panel sidebar-menu"><div class=panel-heading><h3 class=panel-title>Tags</h3></div><div class=panel-body><ul class=tag-cloud><li><a href=https://foundries.io/tags/ai><i class="fa fa-tags"></i>ai</a></li><li><a href=https://foundries.io/tags/assistant><i class="fa fa-tags"></i>assistant</a></li><li><a href=https://foundries.io/tags/att><i class="fa fa-tags"></i>att</a></li><li><a href=https://foundries.io/tags/balena><i class="fa fa-tags"></i>balena</a></li><li><a href=https://foundries.io/tags/ble><i class="fa fa-tags"></i>ble</a></li><li><a href=https://foundries.io/tags/blockchain><i class="fa fa-tags"></i>blockchain</a></li><li><a href=https://foundries.io/tags/bugs><i class="fa fa-tags"></i>bugs</a></li><li><a href=https://foundries.io/tags/container><i class="fa fa-tags"></i>container</a></li><li><a href=https://foundries.io/tags/containers><i class="fa fa-tags"></i>containers</a></li><li><a href=https://foundries.io/tags/crypto><i class="fa fa-tags"></i>crypto</a></li><li><a href=https://foundries.io/tags/cve><i class="fa fa-tags"></i>cve</a></li><li><a href=https://foundries.io/tags/decentralized><i class="fa fa-tags"></i>decentralized</a></li><li><a href=https://foundries.io/tags/demos><i class="fa fa-tags"></i>demos</a></li><li><a href=https://foundries.io/tags/docker><i class="fa fa-tags"></i>docker</a></li><li><a href=https://foundries.io/tags/docker-apps><i class="fa fa-tags"></i>docker-apps</a></li><li><a href=https://foundries.io/tags/docker-compose><i class="fa fa-tags"></i>docker-compose</a></li><li><a href=https://foundries.io/tags/edge><i class="fa fa-tags"></i>edge</a></li><li><a href=https://foundries.io/tags/embedded><i class="fa fa-tags"></i>embedded</a></li><li><a href=https://foundries.io/tags/fota><i class="fa fa-tags"></i>fota</a></li><li><a href=https://foundries.io/tags/foundries.io><i class="fa fa-tags"></i>foundries.io</a></li><li><a href=https://foundries.io/tags/foundriesfactory><i class="fa fa-tags"></i>foundriesfactory</a></li><li><a href=https://foundries.io/tags/google><i class="fa fa-tags"></i>google</a></li><li><a href=https://foundries.io/tags/iot><i class="fa fa-tags"></i>iot</a></li><li><a href=https://foundries.io/tags/k8s><i class="fa fa-tags"></i>k8s</a></li><li><a href=https://foundries.io/tags/kernel><i class="fa fa-tags"></i>kernel</a></li><li><a href=https://foundries.io/tags/keys><i class="fa fa-tags"></i>keys</a></li><li><a href=https://foundries.io/tags/kubernetes><i class="fa fa-tags"></i>kubernetes</a></li><li><a href=https://foundries.io/tags/linux><i class="fa fa-tags"></i>linux</a></li><li><a href=https://foundries.io/tags/lmp><i class="fa fa-tags"></i>lmp</a></li><li><a href=https://foundries.io/tags/lte><i class="fa fa-tags"></i>lte</a></li><li><a href=https://foundries.io/tags/lts><i class="fa fa-tags"></i>lts</a></li><li><a href=https://foundries.io/tags/lwm2m><i class="fa fa-tags"></i>lwm2m</a></li><li><a href=https://foundries.io/tags/management><i class="fa fa-tags"></i>management</a></li><li><a href=https://foundries.io/tags/mcuboot><i class="fa fa-tags"></i>mcuboot</a></li><li><a href=https://foundries.io/tags/media><i class="fa fa-tags"></i>media</a></li><li><a href=https://foundries.io/tags/microplatform><i class="fa fa-tags"></i>microplatform</a></li><li><a href=https://foundries.io/tags/open-source><i class="fa fa-tags"></i>open-source</a></li><li><a href=https://foundries.io/tags/ota><i class="fa fa-tags"></i>ota</a></li><li><a href=https://foundries.io/tags/portainer><i class="fa fa-tags"></i>portainer</a></li><li><a href=https://foundries.io/tags/press><i class="fa fa-tags"></i>press</a></li><li><a href=https://foundries.io/tags/radio><i class="fa fa-tags"></i>radio</a></li><li><a href=https://foundries.io/tags/raspberry-pi><i class="fa fa-tags"></i>raspberry-pi</a></li><li><a href=https://foundries.io/tags/raspberry-pi-4><i class="fa fa-tags"></i>raspberry-pi-4</a></li><li><a href=https://foundries.io/tags/robot><i class="fa fa-tags"></i>robot</a></li><li><a href=https://foundries.io/tags/secure><i class="fa fa-tags"></i>secure</a></li><li><a href=https://foundries.io/tags/security><i class="fa fa-tags"></i>security</a></li><li><a href=https://foundries.io/tags/toradex><i class="fa fa-tags"></i>toradex</a></li><li><a href=https://foundries.io/tags/update><i class="fa fa-tags"></i>update</a></li><li><a href=https://foundries.io/tags/whitepaper><i class="fa fa-tags"></i>whitepaper</a></li><li><a href=https://foundries.io/tags/zephyr><i class="fa fa-tags"></i>zephyr</a></li><li><a href=https://foundries.io/tags/zmp><i class="fa fa-tags"></i>zmp</a></li></ul></div></div></div></div></div></div></div><footer><div class="row footerlinks"><div class="columns small-12 medium-6 border-right"><h2>Company</h2><ul><li><a href=https://foundries.io/company/>About</a></li><li><a href=https://foundries.io/careers/>Careers</a></li><li><a href=https://support.foundries.io/>Support</a></li><li><a href=https://status.foundries.io/>System status</a></li><li><a href=https://foundries.io/privacy/>Privacy</a></li><li><a href=https://foundries.io/terms/>Terms</a></li></ul></div><div class="columns small-12 medium-6"><h2>Connect</h2><ul class=social-links><li><a href=https://twitter.com/foundriesio><i class="fa fa-twitter fa-2x"></i></a></li><li><a href=https://www.linkedin.com/company/foundriesio/><i class="fa fa-linkedin fa-2x"></i></a></li><li><a href=https://github.com/foundriesio><i class="fa fa-github fa-2x"></i></a></li><li><a href=https://join.slack.com/t/foundriesio/shared_invite/enQtNTc5NDkxNTI5NTExLWQ1Yjc3NDA2MjI3NzA3YzkxYjEzNzlhZjQ0M2QxYTIzYmIzZjlmOThmZGU0NTk5MWEwZGIwMTU2YWE4N2I5NWQ><i class="fa fa-slack fa-2x"></i></a></li></ul></div></div><p class=copyright>Copyright 2018 &ndash; 2020 Foundries.io All rights reserved</p></footer><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-111281311-1','auto');ga('send','pageview');}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script src=/js/vendor/wow.min.js></script><script src=/js/vendor/what-input.min.js></script><script src=/js/vendor/hoverIntent.js></script><script src=/js/vendor/jquery.responsiveTabs.js></script><script src=/js/vendor/superfish.min.js></script><script src=/js/vendor/owl.carousel.min.js></script><script src=/js/vendor/foundation.min.js></script><script src=/js/vendor/jquery.slicknav.min.js></script><script src=/js/custom.min.js></script><script src=https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js></script><script>window.cookieconsent.initialise({"cookie":{"name":"fio_consent","domain":".foundries.io","secure":false},"palette":{"popup":{"background":"#37485c"},"button":{"background":"#14a7d0"}},"position":"bottom-right","content":{"header":'Cookies used on this website!',"target":"_blank","link":false,"message":"This website uses cookies to enable us to improve your experience, as explained in our Privacy Policy.<br><br>By using this website you agree to our <a class='cc-link' target='_blank' href='https://foundries.io/terms#website'>Terms and Conditions</a> and to our <a class='cc-link' taget='_blank' href='https://foundries.io/privacy/'>Privacy Policy</a>","href":"https://foundries.io/privacy/"}});</script></body></html>