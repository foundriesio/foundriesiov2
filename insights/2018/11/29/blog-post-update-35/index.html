<!doctype html><html class=no-js lang=en-us><head><link rel=preconnect href=https://fonts.googleapis.com><link rel=dns-prefetch href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com><link rel=dns-prefetch href=https://fonts.gstatic.com><link rel=preconnect href=https://cdnjs.cloudflare.com><link rel=dns-prefetch href=https://cdnjs.cloudflare.com><link rel=preconnect href=https://www.googletagmanager.com><link rel=dns-prefetch href=https://www.googletagmanager.com><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>microPlatform update 35 | Foundries.io</title><link rel="shortcut icon" href=/images/icons/favicon.ico><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lato:300,400,500,700,900"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css integrity="sha256-HtCCUh9Hkh//8U1OwcbD8epVEUdBvuI8wj1KtqMhNkI=" crossorigin=anonymous><link rel=stylesheet href=/css/foundation.min.228f9b8bdf4aae06e794eb13011f0858c2d27f9d39a55e09bbe84ff4bc8644c4.css><link rel=stylesheet href=/style.insights.bundle.min.97b39df0ad850f9114e54736d23c61aa73e84cb58f640dac3e6026c5d689023d.css><link rel=stylesheet href=/css/slicknav.min.css></head><body><div class="top sticky"><div class=row><div class="small-12 large-3 medium-3 columns"><div class=logo><a href=/><img src=/images/logo.png alt="Foundries.io logo"></a></div></div><div class="small-12 large-9 medium-9 columns"><nav class=desktop-menu><ul class=sf-menu id=navigation><li><a href=/company/>ABOUT</a><ul class=nav-menu><li><a href=/company/>COMPANY</a></li><li><a href=/careers/>CAREERS</a></li></ul></li><li><a href=/insights/>INSIGHTS</a><ul class=nav-menu><li><a href=/insights/>BLOG</a></li><li><a href=/categories/news-and-media/>NEWS</a></li><li><a href=/categories/updates/>UPDATES</a></li></ul></li><li><a href=/partners/>PARTNERS</a><ul class=nav-menu><li><a href=/partners/>PARTNER PROGRAM</a></li><li><a href=/partners/all/>OUR PARTNERS</a></li></ul></li><li><a href=/products/>PRODUCTS</a><ul class=nav-menu><li><a href=/products/>FACTORY</a></li><li><a href=/pricing/>PRICING</a></li><li><a href=/hardware/>HARDWARE</a></li><li><a href=/terms/>TERMS &amp; CONDITIONS</a></li></ul></li><li><a href="https://app.foundries.io/login/?next=/"><i class="fa fa-cloud-upload"></i>&nbsp;ENGAGE</a><ul class=nav-menu><li><a href=https://app.foundries.io/docs/>DOCUMENTATION</a></li><li><a href="https://app.foundries.io/login/?next=/">DASHBOARD</a></li><li><a href=https://support.foundries.io>SUPPORT</a></li><li><a href=https://join.slack.com/t/foundriesio/shared_invite/enQtNTc5NDkxNTI5NTExLWQ1Yjc3NDA2MjI3NzA3YzkxYjEzNzlhZjQ0M2QxYTIzYmIzZjlmOThmZGU0NTk5MWEwZGIwMTU2YWE4N2I5NWQ>SLACK</a></li><li><a href=https://docs.foundries.io/latest/customer-factory/index.html>START YOUR FACTORY</a></li></ul></li></ul></nav></div></div></div><header class=alt-6><div class=message><div class=row><div class="small-12 columns"><div class=message-intro><span class=message-line></span><p>FOUNDRIES.IO INSIGHTS</p><span class=message-line></span></div><h1>microPlatform update 35</h1><p class="text-muted text-uppercase mb-small text-right color-white">November 29, 2018</p></div></div></div></header><div id=content><div class=container><div class=row><div class="small-12 columns" id=insights-post><div id=post-content><h1 id=summary>Summary</h1><h2 id=zephyr-microplatform-changes-for-35>Zephyr microPlatform changes for 35</h2><p>A very active snapshot from Zephyr as part of the v1.14 development
cycle. Tree-wide refactoring for DTS, board.h include removal and more
logging changes. MCUboot and sample applications updated as a result.</p><h2 id=linux-microplatform-changes-for-35>Linux microPlatform changes for 35</h2><p>Core layer updates based on the latest OE/Yocto master changes.</p><h1 id=zephyr-microplatform>Zephyr microPlatform</h1><h2 id=highlights>Highlights</h2><ul><li>Zephyr v1.14 development snapshot with tree-wide refactoring</li><li>MCUboot merge from JuulLabs-OSS with updates due to upstream Zephyr changes</li><li>Sample applications get some updates due to upstream Zephyr changes</li></ul><h2 id=components>Components</h2><h3 id=mcuboot>MCUboot</h3><h4 id=features>Features</h4><h5 id=mbedtls-changes-to-support-versions-2-6-1>MbedTLS changes to support versions &gt; 2.6.1</h5><p>RSA image handling was changed so that MbedTLS versions greater
than 2.6.1 would be compatible.</p><h4 id=bugs>Bugs</h4><h5 id=zephyr-build-fixed-due-to-dts-changes>Zephyr build fixed due to DTS changes</h5><p>Due to Zephyr upstream changing the way dts_fixup.h defines
the fixup definitions, MCUboot needed a patch to alter
FLASH_DEV_NAME -&gt; DT_FLASH_DEV_NAME.</p><h3 id=zephyr>Zephyr</h3><h4 id=features-1>Features</h4><h5 id=use-dt-prefix-in-all-defined-labels-not-related-to-kconfig>Use DT_ prefix in all defined labels not related to Kconfig</h5><p>Several tree wide-patches hit this merge-up, and the first is a refactoring
of all dts<em>fixup defines which pretended to be Kconfig settings due to their
naming of CONFIG</em><em>. This was causing some confusion when attempting to figure
out where various settings were generated. Instead of CONFIG_</em>, all of these
settings are now generated as DT_*. Enter quite a few patches and follow-up
cleanup patches to make all of this happen.</p><h5 id=refactor-log-module-register-and-log-module-declare-macros>Refactor LOG_MODULE_REGISTER and LOG_MODULE_DECLARE macros</h5><p>The LOG_MODULE_REGISTER and LOG_MODULE_DECLARE macros now take log level as
optional parameter. LOG_MODULE_DECLARE can now also be used in static inline
functions in headers. This was another tree-wide set of patches which
affected every file with Logger configuration.</p><h5 id=remove-board-h-from-boards-that-don-t-need-it>Remove board.h from boards that don&rsquo;t need it</h5><p>Last of the tree-wide patches that might might affect external code, was a
removal of unneeded board.h files. These typically only included <soc.h>.
If you see a &ldquo;file not found: board.h&rdquo; error during your next compile,
hopefully you&rsquo;ll remember what you saw here and just remove the offending
&ldquo;#include <board.h>&rdquo; and replace it with &ldquo;#include <soc.h>&rdquo; if needed.</p><h5 id=dynamic-interrupt-api-for-the-kernel>Dynamic interrupt API for the kernel</h5><p>Zephyr wants to support hypervisor applications such as ACRN which presents
virtual devices via PCI enumeration. In this case, the interrupt configuration
is not known at build time. To support this and other use-cases, dynamic
interrupt APIs were added to the kernel.</p><h5 id=additional-soc-and-board-support>Additional SoC and board support</h5><p>The STM32F143xG SoC and ST B-L072Z-LRWAN1 board were added to to Zephyr.</p><h4 id=bugs-1>Bugs</h4><h5 id=scheduler-race-condition-fixed-in-k-sched-time-slice-set>Scheduler race condition fixed in k_sched_time_slice_set()</h5><p>If k_sched_time_slice_set() was interrupted by a timeslice event,
the slicing state could be corrupted. Fixed by using the
existing lock sched_lock around the operations.</p><h5 id=fix-dts-fixup-file-location-for-external-socs>Fix DTS fixup file location for external SoCs</h5><p>If you were wondering why the dts_fixup.h file in your external
SoC wasn&rsquo;t automatically being included like the dts_fixup.h files
in the SoCs inside Zephyr, then wonder no more! It was a bug.
And now it&rsquo;s fixed.</p><h3 id=hawkbit-and-mqtt-sample-application>hawkBit and MQTT sample application</h3><h4 id=features-2>Features</h4><p>Not addressed in this update</p><h4 id=bugs-2>Bugs</h4><h5 id=dt-prefix-naming-update>DT_* prefix naming update</h5><p>This affected some FLASH_DEV_NAME references in our sample.</p><h5 id=remove-board-h-references>Remove board.h references</h5><p>Upstream Zephyr removed the board.h file for many boards that
didn&rsquo;t actually need them. In our case, we need to remove the
left-over board.h references in our samples.</p><h3 id=lwm2m-sample-application>LWM2M sample application</h3><h4 id=features-3>Features</h4><p>Not addressed in this update</p><h4 id=bugs-3>Bugs</h4><h5 id=dt-prefix-naming-update-1>DT_* prefix naming update</h5><p>This affected some FLASH_DEV_NAME references in our sample.</p><h5 id=remove-board-h-references-1>Remove board.h references</h5><p>Upstream Zephyr removed the board.h file for many boards that
didn&rsquo;t actually need them. In our case, we need to remove the
left-over board.h references in our samples.</p><h5 id=fix-wnc-m14a2a-modem-support>Fix WNC-M14A2A modem support</h5><p>Upstream Zephyr is moving all of the generic settings belonging
to &ldquo;shield&rdquo; type hardware out of the board and SoC files. This
eliminates copy/paste errors as well as duplicated settings.
Instead, these should be configured as Zephyr &ldquo;shields&rdquo; which
have their own directory and settings per board. However, the
WNC-M14A2A cannot be configured just yet as a shield due to
on-going discussion regarding exposure of GPIO pins in a standard
way. So the settings were all moved to the upstream LwM2M client
sample for now.</p><p>Following along with that change, we&rsquo;ve introduced the same files
to the Foundries.io LwM2M sample so that the modem functionality
is not lost.</p><h1 id=linux-microplatform>Linux microPlatform</h1><h2 id=highlights-1>Highlights</h2><ul><li>NetworkManager updated to the 1.14.4 release.</li><li>Core layer updates based on the latest OE/Yocto master changes.</li></ul><h2 id=components-1>Components</h2><h3 id=meta-raspberrypi>Meta RaspberryPi</h3><h4 id=features-4>Features</h4><h5 id=layer-update>Layer Update</h5><p>Bcm sdio.txt linux-firmware files updated based on latest from raspbian.
Firmware updated to 20180924.
Userland updated to the latest master (d574b51a60).</p><h4 id=bugs-4>Bugs</h4><p>Not addressed in this update</p><h3 id=meta-freescale>Meta Freescale</h3><h4 id=features-5>Features</h4><h5 id=layer-update-1>Layer Update</h5><p>Imx-dpu-g2d updated to 1.4.8.
Imx-gpu-g2d updated to 6.2.4.p1.8.
Imx-gpu-viv updated to 6.2.4.p1.8.
Kernel-module-imx-gpu-viv updated to 6.2.4.p1.8.</p><h4 id=bugs-5>Bugs</h4><p>Not addressed in this update</p><h3 id=meta-freescale-3rdparty>Meta Freescale 3rdparty</h3><h4 id=features-6>Features</h4><h5 id=layer-update-2>Layer Update</h5><p>Linux-boundary updated to a141bcc8.
U-boot-boundary updated to ca185fc7.</p><h4 id=bugs-6>Bugs</h4><p>Not addressed in this update</p><h3 id=meta-risc-v>Meta RISC-V</h3><h4 id=features-7>Features</h4><h5 id=layer-update-3>Layer Update</h5><p>Riscv-fesvr updated to 8d108a0a64.
Riscv-pk updated to 6ebd0f2a46.
Riscv-spike updated to 65c8ac48af.</p><h4 id=bugs-7>Bugs</h4><p>Not addressed in this update</p><h3 id=meta-updater-layer>Meta Updater Layer</h3><h4 id=features-8>Features</h4><h5 id=layer-update-4>Layer Update</h5><p>Aktualizr updated to the 348822d914 revision.
Selftest qemu KVM support via QEMU_USE_KVM.</p><h4 id=bugs-8>Bugs</h4><p>Not addressed in this update</p><h3 id=openembedded-core-layer>OpenEmbedded-Core Layer</h3><h4 id=features-9>Features</h4><h5 id=layer-update-5>Layer Update</h5><p>Bind updated to latest lts 9.11.5.
Dmidecode updated to 3.2.
Elfutils updated to 0.175.
Ethtool updated to 4.19.
Gnupg updated to 2.2.11.
Gnutls updated to 3.6.4.
Gobject-introspection updated to 1.58.1.
Gpgme updated to 1.12.0.
Gstreamer1.0 updated to 1.14.3.
Harfbuzz updated to 2.1.3.
Iproute2 updated to 4.19.0
Libgcrypt updated to 1.8.4.
Libpcre2 updated to 10.32.
Libsolv updated to 0.7.1.
Libva updated to 2.3.0.
Ltp updated to 20180926.
Man-db updated 2.8.4.
Mtools updated to 4.0.19.
Nasm updated to 2.14.
Ncurses updated to 6.1+20181013.
Nspr updated to 4.20.
Openssh updated to 7.9p1.
Openssl10 updated to 1.0.2q.
Rng-tools updated to 6.6.
Rpcbind updated to 1.2.5.
Sqlite3 updated to 3.25.3.
Strace updated to 4.25.
Tiff updated to 4.0.10.
Vala updated to 0.42.3.</p><h4 id=bugs-9>Bugs</h4><h5 id=bind>bind</h5><p>A denial of service flaw was discovered in bind versions that
include the &ldquo;deny-answer-aliases&rdquo; feature. This flaw may allow
a remote attacker to trigger an INSIST assert in named leading
to termination of the process and a denial of service condition.</p><ul><li><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-5740">CVE-2018-5740</a></li></ul><h5 id=gettext>gettext</h5><p>Double free in default_add_message in read-catalog.c.</p><ul><li><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-18751">CVE-2018-18751</a></li></ul><h3 id=meta-openembedded-layer>Meta OpenEmbedded Layer</h3><h4 id=features-10>Features</h4><h5 id=layer-update-6>Layer Update</h5><p>NetworkManager updated to 1.14.4.</p><h4 id=bugs-10>Bugs</h4><p>Not addressed in this update</p><h3 id=meta-lmp-layer>Meta LMP Layer</h3><h4 id=features-11>Features</h4><h5 id=layer-update-7>Layer Update</h5><p>Aktualizr-runtime-prov removed as it is not required anymore.
Pi-bluetooth changed to force hciattach with noflow on RaspberryPi.</p><h4 id=bugs-11>Bugs</h4><p>Not addressed in this update</p></div><div id=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"foundriesio"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><div class=row><div class="small-12 columns"><div class=post-categories><div class="panel panel-default sidebar-menu"><div class=panel-heading><h3 class=panel-title>Categories</h3></div><div class=panel-body><ul class="nav nav-pills nav-stacked"><li><a href=https://foundries.io/categories/blockchain>blockchain (1)</a></li><li><a href=https://foundries.io/categories/conferences>conferences (4)</a></li><li><a href=https://foundries.io/categories/demos>demos (1)</a></li><li><a href=https://foundries.io/categories/fota>fota (10)</a></li><li><a href=https://foundries.io/categories/microplatform>microplatform (7)</a></li><li><a href=https://foundries.io/categories/news-and-media>news-and-media (7)</a></li><li><a href=https://foundries.io/categories/updates>updates (51)</a></li><li><a href=https://foundries.io/categories/zephyr-mp>zephyr-mp (2)</a></li><li><a href=https://foundries.io/categories/zephyr-news>zephyr-news (16)</a></li></ul></div></div><div class="panel sidebar-menu"><div class=panel-heading><h3 class=panel-title>Tags</h3></div><div class=panel-body><ul class=tag-cloud><li><a href=https://foundries.io/tags/ai><i class="fa fa-tags"></i>ai</a></li><li><a href=https://foundries.io/tags/assistant><i class="fa fa-tags"></i>assistant</a></li><li><a href=https://foundries.io/tags/att><i class="fa fa-tags"></i>att</a></li><li><a href=https://foundries.io/tags/balena><i class="fa fa-tags"></i>balena</a></li><li><a href=https://foundries.io/tags/ble><i class="fa fa-tags"></i>ble</a></li><li><a href=https://foundries.io/tags/blockchain><i class="fa fa-tags"></i>blockchain</a></li><li><a href=https://foundries.io/tags/bugs><i class="fa fa-tags"></i>bugs</a></li><li><a href=https://foundries.io/tags/container><i class="fa fa-tags"></i>container</a></li><li><a href=https://foundries.io/tags/containers><i class="fa fa-tags"></i>containers</a></li><li><a href=https://foundries.io/tags/crypto><i class="fa fa-tags"></i>crypto</a></li><li><a href=https://foundries.io/tags/cve><i class="fa fa-tags"></i>cve</a></li><li><a href=https://foundries.io/tags/decentralized><i class="fa fa-tags"></i>decentralized</a></li><li><a href=https://foundries.io/tags/demos><i class="fa fa-tags"></i>demos</a></li><li><a href=https://foundries.io/tags/docker><i class="fa fa-tags"></i>docker</a></li><li><a href=https://foundries.io/tags/docker-compose><i class="fa fa-tags"></i>docker-compose</a></li><li><a href=https://foundries.io/tags/edge><i class="fa fa-tags"></i>edge</a></li><li><a href=https://foundries.io/tags/fota><i class="fa fa-tags"></i>fota</a></li><li><a href=https://foundries.io/tags/foundries.io><i class="fa fa-tags"></i>foundries.io</a></li><li><a href=https://foundries.io/tags/google><i class="fa fa-tags"></i>google</a></li><li><a href=https://foundries.io/tags/iot><i class="fa fa-tags"></i>iot</a></li><li><a href=https://foundries.io/tags/k8s><i class="fa fa-tags"></i>k8s</a></li><li><a href=https://foundries.io/tags/kernel><i class="fa fa-tags"></i>kernel</a></li><li><a href=https://foundries.io/tags/keys><i class="fa fa-tags"></i>keys</a></li><li><a href=https://foundries.io/tags/kubernetes><i class="fa fa-tags"></i>kubernetes</a></li><li><a href=https://foundries.io/tags/linux><i class="fa fa-tags"></i>linux</a></li><li><a href=https://foundries.io/tags/lmp><i class="fa fa-tags"></i>lmp</a></li><li><a href=https://foundries.io/tags/lte><i class="fa fa-tags"></i>lte</a></li><li><a href=https://foundries.io/tags/lts><i class="fa fa-tags"></i>lts</a></li><li><a href=https://foundries.io/tags/lwm2m><i class="fa fa-tags"></i>lwm2m</a></li><li><a href=https://foundries.io/tags/management><i class="fa fa-tags"></i>management</a></li><li><a href=https://foundries.io/tags/mcuboot><i class="fa fa-tags"></i>mcuboot</a></li><li><a href=https://foundries.io/tags/media><i class="fa fa-tags"></i>media</a></li><li><a href=https://foundries.io/tags/microplatform><i class="fa fa-tags"></i>microplatform</a></li><li><a href=https://foundries.io/tags/open-source><i class="fa fa-tags"></i>open-source</a></li><li><a href=https://foundries.io/tags/ota><i class="fa fa-tags"></i>ota</a></li><li><a href=https://foundries.io/tags/portainer><i class="fa fa-tags"></i>portainer</a></li><li><a href=https://foundries.io/tags/press><i class="fa fa-tags"></i>press</a></li><li><a href=https://foundries.io/tags/radio><i class="fa fa-tags"></i>radio</a></li><li><a href=https://foundries.io/tags/raspberry-pi><i class="fa fa-tags"></i>raspberry-pi</a></li><li><a href=https://foundries.io/tags/raspberry-pi-4><i class="fa fa-tags"></i>raspberry-pi-4</a></li><li><a href=https://foundries.io/tags/security><i class="fa fa-tags"></i>security</a></li><li><a href=https://foundries.io/tags/update><i class="fa fa-tags"></i>update</a></li><li><a href=https://foundries.io/tags/whitepaper><i class="fa fa-tags"></i>whitepaper</a></li><li><a href=https://foundries.io/tags/zephyr><i class="fa fa-tags"></i>zephyr</a></li><li><a href=https://foundries.io/tags/zmp><i class="fa fa-tags"></i>zmp</a></li></ul></div></div></div></div></div></div></div><footer><div class="row footerlinks"><div class="columns small-12 medium-6 border-right"><h2>Company</h2><ul><li><a href=https://foundries.io/company/>About</a></li><li><a href=https://foundries.io/careers/>Careers</a></li><li><a href=https://support.foundries.io/>Support</a></li></ul></div><div class="columns small-12 medium-6"><h2>Connect</h2><ul class=social-links><li><a href=https://twitter.com/foundriesio><i class="fa fa-twitter fa-2x"></i></a></li><li><a href=https://www.linkedin.com/company/foundriesio/><i class="fa fa-linkedin fa-2x"></i></a></li><li><a href=https://github.com/foundriesio><i class="fa fa-github fa-2x"></i></a></li><li><a href=https://join.slack.com/t/foundriesio/shared_invite/enQtNTc5NDkxNTI5NTExLWQ1Yjc3NDA2MjI3NzA3YzkxYjEzNzlhZjQ0M2QxYTIzYmIzZjlmOThmZGU0NTk5MWEwZGIwMTU2YWE4N2I5NWQ><i class="fa fa-slack fa-2x"></i></a></li></ul></div></div><p class=copyright>Copyright 2018 &ndash; 2019 Foundries.io All rights reserved</p></footer><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-111281311-1','auto');ga('send','pageview');}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script src=/js/vendor/wow.min.js></script><script src=/js/vendor/what-input.min.js></script><script src=/js/vendor/hoverIntent.js></script><script src=/js/vendor/jquery.responsiveTabs.js></script><script src=/js/vendor/superfish.min.js></script><script src=/js/vendor/owl.carousel.min.js></script><script src=/js/vendor/foundation.min.js></script><script src=/js/vendor/jquery.slicknav.min.js></script><script src=/js/custom.min.js></script></body></html>