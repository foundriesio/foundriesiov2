<!doctype html><html class=no-js lang=en-us><head><link rel=preconnect href=https://cdnjs.cloudflare.com><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com><link rel=preconnect href=https://www.googletagmanager.com><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>microPlatform update 36 | Foundries.io</title><link rel="shortcut icon" href=/images/icons/favicon.ico><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lato:300,400,500,700,900"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css integrity="sha256-HtCCUh9Hkh//8U1OwcbD8epVEUdBvuI8wj1KtqMhNkI=" crossorigin=anonymous><link rel=stylesheet href=/css/foundation.min.228f9b8bdf4aae06e794eb13011f0858c2d27f9d39a55e09bbe84ff4bc8644c4.css><link rel=stylesheet href=/style.insights.bundle.min.2aa35451f18591646da184328275dd008b2d31d8a9f140046184870b6fa8c1f4.css></head><body><div class="top sticky"><div class=row><div class="small-12 large-3 medium-3 columns"><div class=logo><a href=/><img src=/images/logo.png alt="Foundries.io logo"></a></div></div><div class="small-12 large-9 medium-9 columns"><nav class=desktop-menu><ul class=sf-menu id=navigation><li><a href=/company/>ABOUT</a><ul class=nav-menu><li><a href=/company/>COMPANY</a></li><li><a href=/labs/>LABS</a></li><li><a href=/careers/>CAREERS</a></li></ul></li><li><a href=/insights/>INSIGHTS</a><ul class=nav-menu><li><a href=/insights/>BLOG</a></li><li><a href=/categories/news-and-media/>NEWS</a></li><li><a href=/categories/updates/>UPDATES</a></li></ul></li><li><a href=/partners/>PARTNERS</a><ul class=nav-menu><li><a href=/partners/>PARTNER PROGRAM</a></li><li><a href=/partners/all/>OUR PARTNERS</a></li></ul></li><li><a href=/products/>PRODUCTS</a><ul class=nav-menu><li><a href=/products/>MICROPLATFORMS</a></li><li><a href=/pricing/>PRICING</a></li><li><a href=/hardware/>HARDWARE</a></li><li><a href=/terms/>TERMS &amp; CONDITIONS</a></li></ul></li><li><a href="https://app.foundries.io/login/?next=/"><i class="fa fa-cloud-upload"></i>&nbsp;ENGAGE</a><ul class=nav-menu><li><a href=https://app.foundries.io/docs/>DOCUMENTATION</a></li><li><a href="https://app.foundries.io/login/?next=/">DASHBOARD</a></li><li><a href=https://forums.foundries.io>FORUMS</a></li><li><a href=https://support.foundries.io>SUPPORT</a></li><li><a href=https://join.slack.com/t/foundriesio/shared_invite/enQtNTc5NDkxNTI5NTExLTU1YzI3YWFmZTI3ZjRjOTExZDZjYWFmMDNjZDBjYjczYTYzZWE0ZWYxYWVjMGZhYjNjN2MyMDVhMzY5NWNlNDE>SLACK</a></li><li><a href="https://app.foundries.io/login/?next=/">GET STARTED</a></li></ul></li></ul></nav></div></div></div><header class=alt-6><div class=message><div class=row><div class="small-12 columns"><div class=message-intro><span class=message-line></span><p>FOUNDRIES.IO INSIGHTS</p><span class=message-line></span></div><h1>microPlatform update 36</h1><p class="text-muted text-uppercase mb-small text-right color-white">December 7, 2018</p></div></div></div></header><div id=content><div class=container><div class=row><div class="small-12 columns" id=insights-post><div id=post-content><h1 id=summary>Summary</h1><h2 id=zephyr-microplatform-changes-for-36>Zephyr microPlatform changes for 36</h2><p>Busy portion of the Zephyr v1.14 development cycle, with some regressions
needing to be weeded out. No changes to MCUboot, but the samples saw
adjustments for API movement, progressive erase addition and Kconfig
changes to allow for OpenThread and 802.15.4 configurations.</p><h2 id=linux-microplatform-changes-for-36>Linux microPlatform changes for 36</h2><p>Core layer updates based on the latest OE/Yocto master changes.</p><h1 id=zephyr-microplatform>Zephyr microPlatform</h1><h2 id=highlights>Highlights</h2><ul><li>Zephyr v1.14 development snapshot with fixes for a regression and a build break</li><li>Samples have progressive erase functionality added for nRF52840 HW</li></ul><h2 id=components>Components</h2><h3 id=mcuboot>MCUboot</h3><h4 id=features>Features</h4><p>Not addressed in this update</p><h4 id=bugs>Bugs</h4><p>Not addressed in this update</p><h3 id=zephyr>Zephyr</h3><h4 id=features-1>Features</h4><h5 id=mqtt-library-receives-socket-support>MQTT library receives socket support</h5><p>A new socket-based MQTT implementation was added to Zephyr
including support for TLS transport.</p><p>The existing net_buf-based implementation was marked as
legacy. Part of this transition changed the net_pkt-related
MQTT Kconfig options from CONFIG<em>MQTT</em>* to CONFIG_MQTT<em>LEGACY</em>*.
This will affect out-of-tree samples.</p><p>The in-tree MQTT publisher sample and related tests were
transitioned to the socket-based implementation.</p><h5 id=coap-library-plays-nice-with-sockets>CoAP library plays nice with sockets</h5><p>The CoAP library was split into 2 implementations chosen via Kconfig for
net_pkt and socket-friendly (flat buffers are used) support.
The net_pkt support was marked as deprecated which causes
all sorts of warnings during the build. Samples continuing to
use net_pkt support must explicitly choose the
CONFIG_COAP_NET_PKT=y config.</p><p>New CoAP samples demonstrating socket support were added to
samples/net/sockets/*.</p><h5 id=so-long-rpl-and-thanks-for-all-the-fish>So long RPL and thanks for all the fish</h5><p>RPL support has been deprecated due to the maintainer being
unable to continue supporting the protocol. It&rsquo;s possible
that another maintainer can be found in the future, in which
case, the protocol will be &hellip; un-deprecated.</p><h5 id=cmake-support-for-images-without-gaps>CMake support for images without gaps</h5><p>User can now specify a Kconfig variable CONFIG_BUILD_NO_GAP_FILL
to eliminate gaps in any generated hex/bin/s19 files.</p><p>This is done to support building in a multi image context,
where several image files will be merged together.</p><h5 id=additional-soc-and-board-support>Additional SoC and board support</h5><p>ST&rsquo;s STM32L471xG SoC is now supported in Zephyr as well as
Silicon Labs EFM32PG12B. The EFM32PG-STK3402A board
demonstrates the EFM32PG12B SoC.</p><h4 id=bugs-1>Bugs</h4><h5 id=kernel-clock-timeout-race-condition-and-regression-fix>Kernel clock timeout race condition and regression fix</h5><p>Near the end of this cycle, a patch was merged to fix a race
condition in the clock timeout code. This introduced a
regression for some Nordic HW. We&rsquo;ve taken an upstream
patch to fix this regression.</p><h5 id=nrf-i2c-speed-configuration-from-dts-and-build-break-fix-for-newlibc>nRF I2C speed configuration from dts and build break fix for newlibc</h5><p>Another patch near the end of the cycle added DTS configuration
of I2C speed for nRF. However, the use of static_assert fails
when compiling with NEWLIBC. We pulled an upstream patch
to fix this issue.</p><h5 id=python-version-detection-on-windows-fixed>Python version detection on Windows fixed</h5><p>When a Windows-user had both Python2 and Python3 in their path,
and Python2 was earlier, the wrong python would be detected.</p><p>To fix this until CMake 3.13 release, Zephyr now has a copy of
&lsquo;FindPythonInterp&rsquo; which has been fixed.</p><h5 id=shell-support-still-evolving>shell support still evolving</h5><p>Several shell-related issues were addressed in this cycle:</p><ul><li>Handle RX ring buffer full case</li><li>Add initial log level for rtt and uart backends</li><li>fix RTT backend not returning TX amount</li><li>Fix log messages queueing for multiple instances</li><li>migrate tests to the new shell</li></ul><h3 id=hawkbit-and-mqtt-sample-application>hawkBit and MQTT sample application</h3><h4 id=features-2>Features</h4><h5 id=introduce-erase-progressively-config>introduce ERASE_PROGRESSIVELY config</h5><p>Some hardware may have very long flash erase times, and this
affects the stability of many samples which perform large
erases. This can be fixed by progressively erasing blocks as
needed. Currently, this config is enabled for nRF52840 HW.</p><h4 id=bugs-2>Bugs</h4><h5 id=only-enable-bluetooth-if-802-15-4-and-openthread-aren-t>Only enable Bluetooth if 802.15.4 and OpenThread aren&rsquo;t</h5><p>Allow for OpenThread and 802.15.4 configuration by not enabling
Bluetooth unconditionally.</p><h5 id=fix-mqtt-config-selections>fix MQTT config selections</h5><p>The net_pkt-based MQTT APIs are now deprecated and moved to
MQTT<em>LEGACY</em>* style config settings. Adjust our sample to
match that upstream change.</p><h3 id=lwm2m-sample-application>LWM2M sample application</h3><h4 id=features-3>Features</h4><h5 id=introduce-erase-progressively-config-1>introduce ERASE_PROGRESSIVELY config</h5><p>Some hardware may have very long flash erase times, and this
affects the stability of many samples which perform large
erases. This can be fixed by progressively erasing blocks as
needed. Currently, this config is enabled for nRF52840 HW.</p><h4 id=bugs-3>Bugs</h4><h5 id=only-enable-bluetooth-if-802-15-4-and-openthread-aren-t-1>Only enable Bluetooth if 802.15.4 and OpenThread aren&rsquo;t</h5><p>Allow for OpenThread and 802.15.4 configuration by not enabling
Bluetooth unconditionally.</p><h5 id=make-sure-we-disable-bt-ctlr-when-802-15-4-is-used>Make sure we disable BT_CTLR when 802.15.4 is used</h5><p>Many of the nRF52 boards automatically enable BT_CTLR. This
conflicts directly with 802.15.4, so we need to disable it
explicitly in the 802.15.4 sample overlay.</p><h5 id=fix-legacy-coap-api-selection>Fix legacy CoAP API selection</h5><p>Due to the way CoAP now works, the sample needs to explicitly
select it and choose what kind of support (net_pkt or sockets).</p><h1 id=linux-microplatform>Linux microPlatform</h1><h2 id=highlights-1>Highlights</h2><ul><li>U-Boot updated to the 2018.11 release.</li><li>U-Boot-Fslc updated to the 2018.11-based release.</li><li>Docker Compose updated to the 1.23.2 release.</li><li>Core layer updates based on the latest OE/Yocto master changes.</li></ul><h2 id=components-1>Components</h2><h3 id=meta-freescale>Meta Freescale</h3><h4 id=features-4>Features</h4><h5 id=layer-update>Layer Update</h5><p>Linux-fslc updated to the 4.19-based fork.
U-boot-fslc updated to the 2018.11-based fork.</p><h4 id=bugs-4>Bugs</h4><p>Not addressed in this update</p><h3 id=meta-freescale-3rdparty>Meta Freescale 3rdparty</h3><h4 id=features-5>Features</h4><h5 id=layer-update-1>Layer Update</h5><p>Baseboard support for PICO-Pi and PICO-Hobbit.</p><h4 id=bugs-5>Bugs</h4><p>Not addressed in this update</p><h3 id=meta-intel>Meta Intel</h3><h4 id=features-6>Features</h4><h5 id=layer-update-2>Layer Update</h5><p>Ixgbe updated to 5.5.2.</p><h4 id=bugs-6>Bugs</h4><p>Not addressed in this update</p><h3 id=meta-risc-v>Meta RISC-V</h3><h4 id=features-7>Features</h4><h5 id=layer-update-3>Layer Update</h5><p>Gdb updated to use the mainline tree.
Machine support for qemuriscv32.</p><h4 id=bugs-7>Bugs</h4><p>Not addressed in this update</p><h3 id=meta-updater-layer>Meta Updater Layer</h3><h4 id=features-8>Features</h4><h5 id=layer-update-4>Layer Update</h5><p>Sota.conf now requires usrmerge.</p><h4 id=bugs-8>Bugs</h4><p>Not addressed in this update</p><h3 id=meta-96boards>Meta 96boards</h3><h4 id=features-9>Features</h4><h5 id=layer-update-5>Layer Update</h5><p>Ptable generation fixed for HiKey.</p><h4 id=bugs-9>Bugs</h4><p>Not addressed in this update</p><h3 id=meta-virtualization>Meta Virtualization</h3><h4 id=features-10>Features</h4><h5 id=layer-update-6>Layer Update</h5><p>Lxc updated to 3.0.3.
Libvirt updated to v4.9.0.
Openvswitch updated to 2.10.1.</p><h4 id=bugs-10>Bugs</h4><p>Not addressed in this update</p><h3 id=openembedded-core-layer>OpenEmbedded-Core Layer</h3><h4 id=features-11>Features</h4><h5 id=layer-update-7>Layer Update</h5><p>Gstreamer1.0 updated to 1.14.4.
Libva-utils updated to 2.3.0.
Openssl updated to 1.1.1a.
U-Boot updated to the 2018.11 release.</p><h4 id=bugs-11>Bugs</h4><p>Not addressed in this update</p><h3 id=meta-lmp-layer>Meta LMP Layer</h3><h4 id=features-12>Features</h4><h5 id=layer-update-8>Layer Update</h5><p>Python3-docker updated to 3.6.0.
Python3-docker-compose updated to 1.23.2.
Python3-docker-pycreds updated to 0.4.0.
Python3-requests updated to 2.20.1.</p><h4 id=bugs-12>Bugs</h4><p>Not addressed in this update</p></div><div id=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"foundriesio"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><div class=row><div class="small-12 columns"><div class=post-categories><div class="panel panel-default sidebar-menu"><div class=panel-heading><h3 class=panel-title>Categories</h3></div><div class=panel-body><ul class="nav nav-pills nav-stacked"><li><a href=https://foundries.io/categories/blockchain>blockchain (1)</a></li><li><a href=https://foundries.io/categories/conferences>conferences (4)</a></li><li><a href=https://foundries.io/categories/demos>demos (1)</a></li><li><a href=https://foundries.io/categories/fota>fota (10)</a></li><li><a href=https://foundries.io/categories/microplatform>microplatform (7)</a></li><li><a href=https://foundries.io/categories/news-and-media>news-and-media (7)</a></li><li><a href=https://foundries.io/categories/updates>updates (51)</a></li><li><a href=https://foundries.io/categories/zephyr-mp>zephyr-mp (2)</a></li><li><a href=https://foundries.io/categories/zephyr-news>zephyr-news (16)</a></li></ul></div></div><div class="panel sidebar-menu"><div class=panel-heading><h3 class=panel-title>Tags</h3></div><div class=panel-body><ul class=tag-cloud><li><a href=https://foundries.io/tags/ai><i class="fa fa-tags"></i>ai</a></li><li><a href=https://foundries.io/tags/assistant><i class="fa fa-tags"></i>assistant</a></li><li><a href=https://foundries.io/tags/att><i class="fa fa-tags"></i>att</a></li><li><a href=https://foundries.io/tags/balena><i class="fa fa-tags"></i>balena</a></li><li><a href=https://foundries.io/tags/ble><i class="fa fa-tags"></i>ble</a></li><li><a href=https://foundries.io/tags/blockchain><i class="fa fa-tags"></i>blockchain</a></li><li><a href=https://foundries.io/tags/bugs><i class="fa fa-tags"></i>bugs</a></li><li><a href=https://foundries.io/tags/container><i class="fa fa-tags"></i>container</a></li><li><a href=https://foundries.io/tags/containers><i class="fa fa-tags"></i>containers</a></li><li><a href=https://foundries.io/tags/crypto><i class="fa fa-tags"></i>crypto</a></li><li><a href=https://foundries.io/tags/cve><i class="fa fa-tags"></i>cve</a></li><li><a href=https://foundries.io/tags/decentralized><i class="fa fa-tags"></i>decentralized</a></li><li><a href=https://foundries.io/tags/demos><i class="fa fa-tags"></i>demos</a></li><li><a href=https://foundries.io/tags/docker><i class="fa fa-tags"></i>docker</a></li><li><a href=https://foundries.io/tags/docker-compose><i class="fa fa-tags"></i>docker-compose</a></li><li><a href=https://foundries.io/tags/edge><i class="fa fa-tags"></i>edge</a></li><li><a href=https://foundries.io/tags/fota><i class="fa fa-tags"></i>fota</a></li><li><a href=https://foundries.io/tags/foundries.io><i class="fa fa-tags"></i>foundries.io</a></li><li><a href=https://foundries.io/tags/google><i class="fa fa-tags"></i>google</a></li><li><a href=https://foundries.io/tags/iot><i class="fa fa-tags"></i>iot</a></li><li><a href=https://foundries.io/tags/k8s><i class="fa fa-tags"></i>k8s</a></li><li><a href=https://foundries.io/tags/kernel><i class="fa fa-tags"></i>kernel</a></li><li><a href=https://foundries.io/tags/keys><i class="fa fa-tags"></i>keys</a></li><li><a href=https://foundries.io/tags/kubernetes><i class="fa fa-tags"></i>kubernetes</a></li><li><a href=https://foundries.io/tags/linux><i class="fa fa-tags"></i>linux</a></li><li><a href=https://foundries.io/tags/lmp><i class="fa fa-tags"></i>lmp</a></li><li><a href=https://foundries.io/tags/lte><i class="fa fa-tags"></i>lte</a></li><li><a href=https://foundries.io/tags/lts><i class="fa fa-tags"></i>lts</a></li><li><a href=https://foundries.io/tags/lwm2m><i class="fa fa-tags"></i>lwm2m</a></li><li><a href=https://foundries.io/tags/management><i class="fa fa-tags"></i>management</a></li><li><a href=https://foundries.io/tags/mcuboot><i class="fa fa-tags"></i>mcuboot</a></li><li><a href=https://foundries.io/tags/media><i class="fa fa-tags"></i>media</a></li><li><a href=https://foundries.io/tags/microplatform><i class="fa fa-tags"></i>microplatform</a></li><li><a href=https://foundries.io/tags/open-source><i class="fa fa-tags"></i>open-source</a></li><li><a href=https://foundries.io/tags/ota><i class="fa fa-tags"></i>ota</a></li><li><a href=https://foundries.io/tags/portainer><i class="fa fa-tags"></i>portainer</a></li><li><a href=https://foundries.io/tags/press><i class="fa fa-tags"></i>press</a></li><li><a href=https://foundries.io/tags/radio><i class="fa fa-tags"></i>radio</a></li><li><a href=https://foundries.io/tags/raspberry-pi><i class="fa fa-tags"></i>raspberry-pi</a></li><li><a href=https://foundries.io/tags/raspberry-pi-4><i class="fa fa-tags"></i>raspberry-pi-4</a></li><li><a href=https://foundries.io/tags/security><i class="fa fa-tags"></i>security</a></li><li><a href=https://foundries.io/tags/update><i class="fa fa-tags"></i>update</a></li><li><a href=https://foundries.io/tags/whitepaper><i class="fa fa-tags"></i>whitepaper</a></li><li><a href=https://foundries.io/tags/zephyr><i class="fa fa-tags"></i>zephyr</a></li><li><a href=https://foundries.io/tags/zmp><i class="fa fa-tags"></i>zmp</a></li></ul></div></div></div></div></div></div></div><footer><div class=row><div class="columns small-12 medium-6"><div class=contacts><i class="fa fa-map-marker"></i>CAMBRIDGE, UK</div></div><div class="columns small-12 medium-6"><div class=contacts><i class="fa fa-map-marker"></i>SEATTLE, WA USA</div></div></div><div class="row footerlinks"><div class="columns small-12 medium-3 border-right"><h2>About Foundries.io</h2><p>Foundries.io is changing the IoT landscape by delivering continuously
updated software platforms for a secure, connected world.</p></div><div class="columns small-12 medium-3 border-right"><h2>Company</h2><ul><li><a href=https://foundries.io/company/>About</a></li><li><a href=https://foundries.io/careers/>Careers</a></li><li><a href=https://support.foundries.io/>Support</a></li><li><a href=https://foundries.io/labs/>Labs</a></li></ul></div><div class="columns small-12 medium-3 border-right"><h2>Connect</h2><ul class=social-links><li><a href=https://twitter.com/foundriesio><i class="fa fa-twitter fa-2x"></i></a></li><li><a href=https://www.linkedin.com/company/foundriesio/><i class="fa fa-linkedin fa-2x"></i></a></li><li><a href=https://github.com/foundriesio><i class="fa fa-github fa-2x"></i></a></li><li><a href=https://join.slack.com/t/foundriesio/shared_invite/enQtNTc5NDkxNTI5NTExLTU1YzI3YWFmZTI3ZjRjOTExZDZjYWFmMDNjZDBjYjczYTYzZWE0ZWYxYWVjMGZhYjNjN2MyMDVhMzY5NWNlNDE><i class="fa fa-slack fa-2x"></i></a></li></ul></div><div class="columns small-12 medium-3"><h2>Get Started Today</h2><p>Get immediate access to microPlatform source and binary builds for
today's most popular development boards by starting your subscription.</p></div></div><p class=copyright>Copyright 2018 &ndash; 2019 Foundries.io All rights reserved</p></footer><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-111281311-1','auto');ga('send','pageview');}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><script src=/js/vendor/wow.min.js></script><script src=/js/vendor/what-input.min.js></script><script src=/js/vendor/hoverIntent.js></script><script src=/js/vendor/jquery.responsiveTabs.js></script><script src=/js/vendor/superfish.min.js></script><script src=/js/vendor/owl.carousel.min.js></script><script src=/js/vendor/foundation.min.js></script><script src=/js/custom.min.js></script></body></html>